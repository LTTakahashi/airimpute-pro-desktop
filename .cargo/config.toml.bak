[build]
target-dir = "src-tauri/target"

[env]
# Use the build script for all cargo builds
CARGO_BUILD_RUSTFLAGS = "-C link-arg=-lpython3.12"

# Set library paths for webkit workaround
LD_LIBRARY_PATH = "/tmp/webkit-fix-$$:$LD_LIBRARY_PATH"

# Force webkit2gtk to use version 4.1 instead of 4.0
WEBKIT_DISABLE_COMPOSITING_MODE = "1"

[target.x86_64-unknown-linux-gnu]
# Override linking to use webkit2gtk-4.1 when 4.0 is requested
rustflags = [
    "-C", "link-arg=-Wl,--allow-shlib-undefined"
]